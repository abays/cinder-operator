---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.0
  creationTimestamp: null
  name: cinderbackups.cinder.openstack.org
spec:
  group: cinder.openstack.org
  names:
    kind: CinderBackup
    listKind: CinderBackupList
    plural: cinderbackups
    singular: cinderbackup
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: CinderBackup is the Schema for the cinderbackups API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: CinderBackupSpec defines the desired state of CinderBackup
            properties:
              containerImage:
                description: ContainerImage - Cinder API Container Image URL
                type: string
              databaseHostname:
                description: DatabaseHostname - Cinder Database Hostname
                type: string
              databaseUser:
                default: cinder
                description: 'DatabaseUser - optional username used for cinder DB,
                  defaults to cinder TODO: -> implement needs work in mariadb-operator,
                  right now only cinder'
                type: string
              debug:
                description: Debug - enable debug for different deploy stages. If
                  an init container is used, it runs and the actual action pod gets
                  started with sleep infinity
                properties:
                  bootstrap:
                    default: false
                    description: Bootstrap enable debug
                    type: boolean
                  dbSync:
                    default: false
                    description: DBSync enable debug
                    type: boolean
                  service:
                    default: false
                    description: Service enable debug
                    type: boolean
                type: object
              managingCrName:
                description: ManagingCrName - CR name of managing controller object
                  to identify the config maps
                type: string
              nodeSelector:
                additionalProperties:
                  type: string
                description: NodeSelector to target subset of worker nodes for running
                  the Backup service
                type: object
              passwordSelectors:
                description: PasswordSelectors - Selectors to identify the DB and
                  AdminUser password and TransportURL from the Secret
                properties:
                  admin:
                    default: CinderPassword
                    description: Database - Selector to get the cinder service password
                      from the Secret
                    type: string
                  database:
                    default: CinderDatabasePassword
                    description: 'Database - Selector to get the cinder database user
                      password from the Secret TODO: not used, need change in mariadb-operator'
                    type: string
                  transportUrl:
                    default: TransportURL
                    description: Database - Selector to get the cinder service password
                      from the Secret
                    type: string
                type: object
              replicas:
                description: Replicas - Cinder API Replicas
                format: int32
                type: integer
              secret:
                description: Secret containing OpenStack password information for
                  CinderDatabasePassword, AdminPassword
                type: string
              serviceUser:
                default: cinder
                description: ServiceUser - optional username used for this service
                  to register in cinder
                type: string
            required:
            - databaseHostname
            - managingCrName
            - replicas
            - secret
            type: object
          status:
            description: CinderBackupStatus defines the observed state of CinderBackup
            properties:
              conditions:
                description: Conditions
                items:
                  description: Condition - A particular overall condition of a certain
                    resource
                  properties:
                    lastHearbeatTime:
                      format: date-time
                      type: string
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      description: Reason - Why a particular condition is true, false
                        or unknown
                      type: string
                    status:
                      type: string
                    type:
                      description: Type - A summarizing name for a given condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              hash:
                additionalProperties:
                  type: string
                description: Map of hashes to track e.g. job status
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
